% =================
%   DOCUMENT INIT
% =================

% CHANGE DEFAULT IMAGE FOLDER (requires GRAPHICX)
\graphicspath{{./\defaultimagefolder}}

% INITIAL CONFIGURATIONS
\renewcommand{\baselinestretch}{\defaultinterline}
\setlength{\parindent}{\defaultparindent}
\setlength{\parskip}{\defaultparskip}
\setlength{\footnotesep}{\footnoteskip}
\setlength{\skip\footins}{\footnotespace}

% CONFIGURE BADNESS
\hbadness=\maxdimen
\vbadness=\maxdimen

% FORMATTING TITLES (requires TITLESEC)
\newcommand{\sectionbreak}{\clearpage\phantomsection}
\titleformat{\section}{\normalfont\LARGE\bfseries\raggedright}{\thesection.}{2ex}{}
\titleformat{\subsection}{\normalfont\Large\bfseries\raggedright}{\thesubsection.}{2ex}{}
\titleformat{\subsubsection}{\normalfont\large\bfseries\raggedright}{\thesubsubsection.}{2ex}{}
\titlespacing*{\section} {0pt}{3.0ex plus 2.0ex minus .2ex}{1.5ex plus .2ex}
\titlespacing*{\subsection} {0pt}{2.0ex plus 1.5ex minus .2ex}{1.0ex plus .2ex}
\titlespacing*{\subsubsection} {0pt}{1.5ex plus 1.0ex minus .2ex}{0.5ex plus .2ex}

% CONFIGURE FLOATS DISTANCES
\setlength{\textfloatsep}{20.0pt plus 10.0pt minus 5.0pt}
\setlength{\floatsep}{15.0pt plus 5.0pt minus 3.0pt}
\setlength{\intextsep}{15.0pt plus 5.0pt minus 3.0pt}
\setfloatlocation{figure}{\figureplacement}
\setfloatlocation{table}{\tableplacement}

% CONFIGURE CAPTIONS
\captionsetup[table]{
    font=small,
    labelfont=bf, 
    labelsep=newline, 
    justification=justified,
    singlelinecheck=false, 
    skip=0.25\baselineskip
    }
\captionsetup[figure]{
    font=small,
    labelfont=bf,
    labelsep=colon, 
    justification=justified,
    singlelinecheck=true, 
    skip=0.5\baselineskip
    }

\ifthenelse{\equal{\figurecaptiontop}{true}}{
	\captionsetup[figure]{position=top}
	}{
	\captionsetup[figure]{position=bottom}
}
\ifthenelse{\equal{\tablecaptiontop}{true}}{
	\captionsetup[table]{position=top}
	}{
	\captionsetup[table]{position=bottom}
}
\ifthenelse{\equal{\fignumsec}{true}}{
    \captionsetup{figurewithin=section}
    }{}
\ifthenelse{\equal{\tabnumsec}{true}}{
    \captionsetup{tablewithin=section}
    }{}

% CONFIGURE BIBLIOGRAPHY
\setlength\bibitemsep{\bibentrysep}
\renewcommand*{\bibfont}{\normalfont}
\DefineBibliographyStrings{spanish}{
    andothers = {et\addabbrvspace al\adddot}
    references = {\namereferences}
}
\DefineBibliographyStrings{english}{
    references = {\namereferences}
}

% SET COLOURS FOR LINKS
\definecolor{urlcolor}{rgb}{0.02, 0.27, 0.68}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=cyan,
    citecolor=black,
    urlcolor=urlcolor
    }

% DEFINE FANCY STYLES (requires FANCYHDR)
\fancypagestyle{portrait}{
    \setlength{\headheight}{\portraitheadheight}
    
    \fancyhf{}
    \fancyhead[L]{
        \vspace{-25pt}
        \hspace{.25cm}
    	\includegraphics[height=\departmentimageheight]{\departmentimage}
    	{\small
        \begin{tabular}[b]{l}
            \textsc{\universityname} ~\\
        	\textsc{\facultyname} ~\\
        	\textsc{\universitydepartment} ~\\ \vspace{-15pt}
        \end{tabular}}
    }
}
\fancypagestyle{prelude}{
	\fancyhf{}
	\fancyhead[L]{}
	\fancyhead[R]{}
	\fancyfoot[C]{\small\thepage}
	\renewcommand{\headrulewidth}{0.4pt}
	\renewcommand{\footrulewidth}{0pt}
}
\fancypagestyle{core}{
	\fancyhf{}
	\fancyhead[L]{\nouppercase{\rightmark}}
	\fancyhead[R]{}
	\fancyfoot[C]{\small\thepage}
	\renewcommand{\headrulewidth}{0.4pt}
	\renewcommand{\footrulewidth}{0pt}
}

\renewcommand{\sectionmark}[1]{\markboth{#1}{#1}}     % To have correct names above page

% Autoref default names, applied for English
\addto\extrasenglish{
  \renewcommand{\sectionautorefname} {Section}
  \renewcommand{\subsectionautorefname} {Section}
  \renewcommand{\figureautorefname} {\namefigure}
  \renewcommand{\tableautorefname} {\nametable}
}
